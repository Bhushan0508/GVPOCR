import requests
import json

# The URL of the Flask app's /para endpoint.
# This assumes the Flask app is running on localhost port 5000.
url = "http://127.0.0.1:5000/para"

# The data to send in the POST request.
# It must be a JSON object with a "text" key.
payload = {
    "text": "The fourth day of the Satipaṭṭhāna course is over. The fourth day is over. We were reciting the Mahasatipatthana Sutta. And we were trying to understand it in relation to the practice. Let us continue. We are still in the field of Kaya Anupassana. Four fields, Kaya Anupassana, Vedana Anupassana, Chitta Anupassana and Dhamma Anupassana. One may give importance to any one of these to start, but as one proceeds, all the four get joined together. And then even in Kaya Anupassana, there are quite a few sections. One may start from any section, but after some time one has to reach an important station. And that station is unavoidable whether you are practicing Kaya Anupassana, giving all importance to Kaya or most importance to Kaya or Chitta Anupassana, Vedana Anupassana, Dhamma Anupassana. And you have to reach this important station where you start experiencing Samudaya Dhamma Anupassana Viharati, Vaidhamma Anupassana Viharati, rising and then passing. And then you have to reach the station Samudaya Vaidhamma Anupassana Viharati. Similarly you have to pass through the station Achyata and then Bahidha inside, outside and then both inside and outside. The stage of Bhang where everything gets dissolved, when you feel the entire body, just mass of vibrations arising and passing with great rapidity, where there is no solidity left. Then you proceed further and you reach the stage where you understand, oh this is body, just body. Oh this is Vedana, just Vedana, feeling. Oh this is mind, just mind. And this is mental content, just mental content, Dhamma. You stop identifying yourself with it, no I, no mine, no myself. And you keep on proceeding, proceeding, proceeding, where your mere awareness, what is Satya Matthaye, mere awareness, Jnana Matthaye, mere understanding, that's all. Neither the evaluation of it nor the reactions, just aware, you are just aware and just the understanding, understanding of arising, passing, arising, passing, that's all. And more and more you get established in it. More and more deep rooted Sankara has come on the surface. Of course they keep on coming on the surface, even at the earlier stations, whenever you have Upekkhā with the sensations, The moment when you are free from Taṇhā, free from aversion, that means you are not generating a new Sankara. And for this he said in one of his other suttas, A meditator stops generating all actions, no more Sankara, no more new Kama Sankara. All the accumulated impurities, all the previously accumulated impurities, they get Dhun Manasya. If somebody who is combing or carding the cotton, then all the knots in that cotton will get cleared off, all the dirt in the cotton will get cleared off, every fibre will get separated. In the same way Dhun Manasya, one who is carding the cotton, one who is combing the cotton, in the language of India we say Dhuniya, his job is Dhun Manasya. The impurities inside by this combing, by this carding gets eradicated. But as you proceed on the path and this awareness and Upekkhā becomes more and more established, and for longer periods at a stretch, then very deep impurities start coming up on this surface. Only after Bhanga, very deep impurities start coming up, but Bhanga with Upekkhā, otherwise deep impurities won't come. You have to stop generating new Kama Sankaras, then only the old ones will come on the surface. If you continue to generate new Kama Sankaras, new Sankaras of your actions, reactions, then there is no opportunity for the old ones to come on the surface. You keep on multiplying your stock. So the whole technique is to stop generating new Sankaras and the old ones will automatically come on the surface. And you continue to remain equanimous, layers after layers, layers after layers will get eradicated. The nature is very kind to us. Dhamma is very kind to us. That initially such impurities will come on the surface, such Sankaras of the past will come on the surface, which are responsible to give us a new life of very low order, of very deep misery. Such crude Sankaras come on the surface first and they get eradicated, layers after layers, chunks after chunks. You are aware, you are equanimous, you are aware, you are equanimous. These Sankaras come on the surface and pass away. As much as of these Sankaras have been eradicated, that much you are relieved from misery. A time comes when all these deep Sankaras which are responsible to take you to the lower field of life, when all of them come on the surface and pass away, then that is the time when your mind is fit, the balance of the mind is perfect. And that is the time when one can transcend the field of mind and matter and get a first glimpse of Nibbāna, ultimate reality beyond mind and matter. Maybe a few moments, maybe a few seconds, maybe a few minutes. And then comes back to this field of mind and matter again, this person is now a changed person altogether, changed person altogether. All his old Sankaras of the lower magnetic field of life has gone away and now his behaviour pattern to generate such kind of Sankaras is totally demolished. He doesn't have that behaviour anymore, so he can't generate. Now he can't generate any Sankara which will take him to the lower fields of life in future. Such a person is called Gautrabhu, from Gautrabhu he reaches the stage of Srotapanna, Srotapanna, what Gautrabhu. The clan is changed now, the caste is changed now, earlier everyone is Anaryo, Anaryo. And once one experiences the Nibbāna stage one becomes Anaryo, Anaryo. Later on this word Anaryo, Aryan, they start using for a particular race. In the language of Buddha of the past it has nothing to do with this race or that race, anyone can Bhava an Aryan. A known Aryan becomes an Aryan means becomes a saintly person. Srotapanna, Sota means stream, one was fallen in the stream and now this stream will take him to the final goal of full liberation. No power on the earth can stop this person from Bhava fully liberated. He may take one life, in this very life he may Bhava fully liberated, he may take two lives, he may take three lives, four, five, six or maximum seven lives, not beyond that, is bound to Bhava an Arhan, fully liberated. Someone who has reached this stage keeps on working and the same, the working is the same. And then further deep Sankhara start coming up on the surface, they come on the surface, they pass away. They come on the surface, they pass away, they come on the surface, they pass away. And this time when this person experiences Nibbani stage, it is a much deeper Nibbani stage. And he comes out of it, again in the field of mind and matter, again in the field of rising and passing, but again a changed person. From Sotapanna he has Bhava Sagdhagami, Sagdhagami. That means in this sensual world he will have only one more life. He may Bhava fully liberated in this very life, otherwise one more life, he becomes Sagdhagami. And with this experience of deeper Nibbani stage, when he comes back to the sensual field of mind and matter, the same practice, Atapi Sampajanusatima, Atapi Sampajanusatima, and starts eradicating further impurities which are finer impurities, but they are impurities which are responsible to give new lives of misery. The circle of life and death is still there. He keeps on observing them equanimously, equanimously, equanimously. And now the dip that he gets of Nibbani is much deeper and he comes out as Anagami. This stage of Anagami, this means this person will either reach the final stage of Arhanta within this life, or he will get just one more life, but not in this sensual field. He will get this life in a very high Brahmanic plane, and from there he will Bhava Arhanta and get liberated. This person who has reached the stage of Anagami, experienced the Nibbani stage of Anagami, again comes back to the field of mind and matter in this very life while practicing, and he again continues to practice Atapi Sampajanusatima, Atapi Sampajanusatima, dedicating finer, finer, finer, finer Sankaras which are responsible to give even one life. They also go away. No more Sankara is left which is responsible to give a new life of misery. The Nibbani stage that one experiences now is the stage of an Arhanta, fully liberated. This can happen in this very life. This can happen in future lives. But the practice remains the same, Atapi Sampajanusatima, Atapi Sampajanusatima. Sampajanu is the sensations arising, passing, arising, passing. Sathima is the awareness. Sampajanu is the Paññā, the Paññā of arising, passing, arising, passing. Direct experience means direct experience of the sensations arising, passing, arising, passing. Bodily sensations. Although mind is involved, because body by itself cannot feel sensations. Sensations are there, but the body cannot feel sensations. It is the mind that feels sensations. So involvement of mind is there, but the sensations must be on body. And he gives a very wonderful description of this. He gives the example of the sky. As winds arise in the sky, different kinds of winds arise in the sky, they arise and then they pass away, they arise and then they pass away. Warm winds, cold winds, fast winds, slow winds, dirty winds, clean winds, different kinds of winds arise, pass away. And he says, similarly, different kinds of sensations arise in the body and pass away. They arise in the body and pass away. In the body, and one keeps on observing them. Observing these sensations on the body, arising, passing, arising, passing. A meditator, atapi, working ardently. This is the essence of the whole technique. Sampajanyam, cannot afford to miss Sampajanyam. Day and night, one remains with Sampajanyam, such a person. This person becomes such a wise person, and he experiences the entire field of vedana. Vedana. Vedanas, when you are dealing with your sankaras, which are very gross."
}

# Set the headers to indicate we are sending JSON.
headers = {
    "Content-Type": "application/json"
}

print(f"Sending POST request to {url} with payload:")
print(json.dumps(payload, indent=2))

try:
    # Make the POST request with a 15-second timeout.
    response = requests.post(url, headers=headers, json=payload, timeout=300)

    # Raise an exception for bad status codes (4xx or 5xx).
    response.raise_for_status()

    # Print the successful response from the server.
    print("\n--- Server Response ---")
    print(f"Status Code: {response.status_code}")
    print("Response JSON:")
    # Use .json() to parse the JSON response body.
    print(json.dumps(response.json(), indent=2))
    print("-----------------------")

except requests.exceptions.RequestException as e:
    print(f"\nAn error occurred: {e}")
    print("Please ensure the Flask application (app.py) is running and accessible.")